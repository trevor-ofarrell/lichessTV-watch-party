{"ast":null,"code":"var _jsxFileName = \"/home/d9/code/lichessTV-watch-party/client/src/components/Board.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Chessboard from \"chessboardjsx\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst createPlayerNames = (user, setPlayer) => {\n  let username = \"\";\n\n  if (user.user.name) {\n    if (user.user.title) {\n      username = user.user.title + \" \" + user.user.name + \" \" + user.rating;\n    } else {\n      username = user.user.name + \" \" + user.rating;\n    }\n\n    setPlayer(username);\n  }\n};\n\nexport const Board = props => {\n  _s();\n\n  const {\n    roomId\n  } = props;\n  const [FEN, setFEN] = useState([]);\n  const [black, setBlack] = useState(\"\");\n  const [white, setWhite] = useState(\"\");\n  const [gameID, setGameID] = useState(\"\");\n  const [listening, setListening] = useState(false);\n  let pgnData = {};\n  useEffect(async () => {\n    if (!listening) {\n      let source;\n\n      if (roomId !== \"featured\") {\n        if (pgnData.id !== roomId) {\n          pgnData = await fetch(`http://localhost:3030/pgn/?id=${roomId}`).then(res => res.json());\n\n          if (pgnData.players.black) {\n            createPlayerNames(pgnData.players.white, setWhite);\n            createPlayerNames(pgnData.players.black, setBlack);\n          }\n        }\n\n        source = new EventSource(`${process.env.REACT_APP_API_ENDPOINT}/lichesstvcustom/?id=${roomId}`);\n\n        source.onmessage = event => {\n          const parsedData = JSON.parse(event.data);\n          setFEN([parsedData.fen]);\n\n          if (parsedData.id) {\n            setGameID(parsedData.id);\n          }\n        };\n      } else {\n        source = new EventSource(`${process.env.REACT_APP_API_ENDPOINT}/lichesstv`);\n\n        source.onmessage = event => {\n          const parsedData = JSON.parse(event.data);\n          setFEN([parsedData.d.fen]);\n\n          if (parsedData.d.players) {\n            createPlayerNames(parsedData.d.players[0], setWhite);\n            createPlayerNames(parsedData.d.players[1], setBlack);\n          }\n\n          if (parsedData.d.id) {\n            setGameID(parsedData.d.id);\n          }\n        };\n      }\n\n      setListening(true);\n    }\n  }, [listening, FEN]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"sm:mt-auto overflow-hidden m-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"font-medium md:text-sm text-xs text-white max-w-70 text-left break-all\",\n      children: [\"FEN: \", FEN]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"m-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"font-medium md:text-2xl text-lg my-1 text-white\",\n        children: black\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"m-auto\",\n        children: /*#__PURE__*/_jsxDEV(Chessboard, {\n          position: FEN[0],\n          transitionDuration: 100,\n          showNotation: false,\n          calcWidth: size => size.screenWidth < 1440 ? size.screenHeight / 100 * 46 : size.screenWidth > 1440 ? size.screenHeight / 100 * 70 : screen.width / 100 * 100\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"font-medium md:text-2xl text-lg my-1 text-white\",\n        children: [\" \", white]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Board, \"8vKx7RhC6eRqk7PXBc6kOONnLpE=\");\n\n_c = Board;\n\nvar _c;\n\n$RefreshReg$(_c, \"Board\");","map":{"version":3,"sources":["/home/d9/code/lichessTV-watch-party/client/src/components/Board.js"],"names":["React","useState","useEffect","Chessboard","createPlayerNames","user","setPlayer","username","name","title","rating","Board","props","roomId","FEN","setFEN","black","setBlack","white","setWhite","gameID","setGameID","listening","setListening","pgnData","source","id","fetch","then","res","json","players","EventSource","process","env","REACT_APP_API_ENDPOINT","onmessage","event","parsedData","JSON","parse","data","fen","d","size","screenWidth","screenHeight","screen","width"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Chessboard from \"chessboardjsx\";\n\nconst createPlayerNames = (user, setPlayer) => {\n  let username = \"\";\n  if (user.user.name) {\n    if (user.user.title) {\n      username = user.user.title + \" \" + user.user.name + \" \" + user.rating;\n    } else {\n      username = user.user.name + \" \" + user.rating;\n    }\n    setPlayer(username);\n  }\n};\n\nexport const Board = (props) => {\n  const { roomId } = props;\n  const [FEN, setFEN] = useState([]);\n  const [black, setBlack] = useState(\"\");\n  const [white, setWhite] = useState(\"\");\n  const [gameID, setGameID] = useState(\"\");\n  const [listening, setListening] = useState(false);\n\n  let pgnData = {};\n  useEffect(async () => {\n    if (!listening) {\n      let source;\n      if (roomId !== \"featured\") {\n        if (pgnData.id !== roomId) {\n          pgnData = await fetch(\n            `http://localhost:3030/pgn/?id=${roomId}`\n          ).then((res) => res.json());\n          if (pgnData.players.black) {\n            createPlayerNames(pgnData.players.white, setWhite);\n            createPlayerNames(pgnData.players.black, setBlack);\n          }\n        }\n        source = new EventSource(\n          `${process.env.REACT_APP_API_ENDPOINT}/lichesstvcustom/?id=${roomId}`\n        );\n        source.onmessage = (event) => {\n          const parsedData = JSON.parse(event.data);\n          setFEN([parsedData.fen]);\n          if (parsedData.id) {\n            setGameID(parsedData.id);\n          }\n        };\n      } else {\n        source = new EventSource(\n          `${process.env.REACT_APP_API_ENDPOINT}/lichesstv`\n        );\n        source.onmessage = (event) => {\n          const parsedData = JSON.parse(event.data);\n          setFEN([parsedData.d.fen]);\n          if (parsedData.d.players) {\n            createPlayerNames(parsedData.d.players[0], setWhite);\n            createPlayerNames(parsedData.d.players[1], setBlack);\n          }\n          if (parsedData.d.id) {\n            setGameID(parsedData.d.id);\n          }\n        };\n      }\n      setListening(true);\n    }\n  }, [listening, FEN]);\n\n  return (\n    <div className=\"sm:mt-auto overflow-hidden m-auto\">\n      <div className=\"font-medium md:text-sm text-xs text-white max-w-70 text-left break-all\">\n        FEN: {FEN}\n      </div>\n      <div className=\"m-auto\">\n        <div className=\"font-medium md:text-2xl text-lg my-1 text-white\">\n          {black}\n        </div>\n        <div className=\"m-auto\">\n          <Chessboard\n            position={FEN[0]}\n            transitionDuration={100}\n            showNotation={false}\n            calcWidth={(size) =>\n              size.screenWidth < 1440\n                ? (size.screenHeight / 100) * 46\n                : size.screenWidth > 1440\n                ? (size.screenHeight / 100) * 70\n                : (screen.width / 100) * 100\n            }\n          />\n        </div>\n        <div className=\"font-medium md:text-2xl text-lg my-1 text-white\">\n          {\" \"}\n          {white}\n        </div>\n      </div>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}